<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html;charset=utf-8" />
		<title>Bookings</title>
        <link rel='stylesheet' href='/static/fullcalendar-3.7.0/fullcalendar.css' />
		<link rel = "stylesheet" type = "text/css" href = "/static/styleSheet.css" >
        <link href="https://fonts.googleapis.com/css?family=Open+Sans|Spectral+SC" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script src="/static/bookings.js"></script>
		<script src='/static/moment.min.js'></script>
		<script src='/static/fullcalendar-3.7.0/fullcalendar.js'></script>
        <script>
			$(document).ready(function() {
    			var inputEvents = {{ events | tojson }}
    			$('#calendar').fullCalendar({
					events : inputEvents
       		 	})
       		});
		</script>
	</head>
	<body>
		<div id="wrapper">
			<header>
				<a href="login"><p class="white" id="login">login | sign up</p></a>
				<a href="/"><img id="logo" src="/static/logo.jpg" alt="Logo"></a>
				<h1>Slightly above average hotel</h1>
			</header>
			
			<div id="main">
                <a href="javascript:history.back()"><img id="back" src="/static/backButton.png" alt="Back Button"></a>
                <h2>Bookings</h2>
                <h3 class = "black"> Add a booking </h3>
                <form action="addBooking" method="post">
                    <table id="bookings">
                        <tr>
                            <td><p>Number of rooms</p></td>
                            <td><input type="number" name="numberOfRooms" required/></td>
                        </tr>
                        <tr>
                            <td><p>Arrival Date</p?></td>
                            <td><input id="ad" type="date" name="arrivalDate" onchange="arrivalConstraint();" required/></td>
                        </tr>
                        <tr>
                            <td><p>Departure Date</p></td>
                            <td><input id="dd" type="date" name="departureDate" required/></td>
                        </tr>
                        <tr><td><input type="submit" value="Book"/></td></tr>
                    </table>
                </form>


                <div id="calendar" data-events="{{ events | tojson }}"></div>

            {% if 'admin' in session %}
                <h2>Admin: Unconfirmed Bookings</h2>
                <table>
                {% for unconfirmedBooking in unconfirmedBookings|reverse %}
                    <tr>
                        <td>Number of rooms:</td>
                        <td>{{unconfirmedBooking["numberOfRooms"]}}</td>
                        <td>Arrival Date:</td>
                        <td>{{unconfirmedBooking["arrivalDate"]}}</td>
                        <td>Departure Date:</td>
                        <td>{{unconfirmedBooking["departureDate"]}}</td>
                        <td>
                            <form action="confirmBooking" method="post">
                                <input type="hidden" value={{loop.index0}} name="index" />
                                <input type="submit" value="Confirm" />
                            </form>
                        </td>
                        <td>
                            <form action="declineBooking" method="post">
                                <input type="hidden" value={{loop.index0}} name="index" />
                                <input type="submit" value="Decline"/>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </table>
            {% endif %}       
			</div>
			
			<footer>
				<div id="contact">
					<h3 class="grey"> Contact </h3>
					<table class="grey">
						<tr> <td> Email </td> <td> slightlyabovehotel@gmail.com </td> </tr>
						<tr> <td> Home </td> <td> 12345 123456 </td> </tr>
						<tr> <td> Mobile </td> <td> 12345678910 </td> </tr>
					</table>
				</div>
			</footer>
		</div>
	</body>
</html>